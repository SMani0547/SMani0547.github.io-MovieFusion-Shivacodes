<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Admin Register</title>
    <link rel="stylesheet" href="/logreg.css">


</head>
<body>
<section>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>


    <div class="signin">
         <div id="notification" class="notification" style="display: none;"></div>

      <div class="content" id="register">

        <h2>Sign Up</h2>

        <div class="form">
           <div class="inputBox">
            <input type="email" id="new-email" placeholder="Enter your Email" required>
            <label for="new-email">Email: *</label>
          </div>
          <div class="inputBox">
            <input type="text" id="new-username" placeholder="Enter your UserName" required>
            <label for="new-username">UserName: *</label>
          </div>
          <div class="inputBox">
            <input type="text" id="fname" placeholder="Enter your First Name" required>
            <label for="fname">First Name: *</label>
          </div>
          <div class="inputBox">
            <input type="text" id="lname" placeholder="Enter your Last Name" required>
            <label for="lname">Last Name: *</label>
          </div>
        <div class="inputBox">
          <div class="password-container">
            <input type="password" id="new-password" placeholder="Enter your password" required>
             <label for="new-password">Password: *</label>
            <button type="button" class="toggle-password" onclick="togglePassword()">ðŸ˜¡</button>
          </div>
        </div>

        <div class="inputBox">
          <div class="password-container">
            <input type="password" id="confirm-password" placeholder="Enter your confirm password" required>
             <label for="confirm-password">Confirm Password: *</label>
            <button type="button" class="toggle-confirmpassword" onclick="toggleconfirmPassword()">ðŸ˜¡</button>
          </div>
        </div>




          <div class="links">
              <a href="">Have an Account?</a>
              <a href="/login.html">Login</a>
              <a href=""> </a>
              <a href=""> </a>
              <a href=""> </a>
              <a href=""> </a>
              <a href=""> </a>
              <a href=""> </a>
              <a href=""> </a>
              <a href=""> </a>
          </div>

          <div class="inputBox">
          <form >
        <input type="submit" value="Register">
          </form>
          </div>
        </div>

      </div>

    </div>

  </section>





    <script>

      // Function to display notification messages
function showNotification(message, type) {
    const notification = document.getElementById("notification");
    notification.textContent = message;
    notification.className = `notification ${type}`;  // Add either 'error' or 'success'
    notification.style.display = "block";

    // Hide the notification after 3 seconds
    setTimeout(() => {
        notification.style.display = "none";
    }, 5000);
}

function validateEmail(email) {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}
document.getElementById("register").addEventListener("submit", function (e) {
    e.preventDefault();

    // Gather input values
    const email = document.getElementById("new-email").value.trim();
    const username = document.getElementById("new-username").value.trim();
    const fname = document.getElementById("fname").value.trim();
    const lname = document.getElementById("lname").value.trim();
    const password = document.getElementById("new-password").value;
    const confirmPassword = document.getElementById("confirm-password").value;

    // Check for empty values
    if (!email || !username || !fname || !lname || !password || !confirmPassword) {
        showNotification("All fields are required!", "error");
        return;
    }

    // Check if passwords match
    if (password !== confirmPassword) {
        showNotification("Passwords do not match!", "error");
        return;
    }
    // Validate email format
  if (!validateEmail(email)) {
    showNotification("Invalid email address!", "error");
    return;
  }

    // Prepare data for submission
    const data = { email, username, fname, lname, password };

    // Submit the form data via fetch
    fetch('/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    })
        .then(res => res.json())
        .then(response => {
            if (response.success) {
                showNotification("Registration successful!", "success");
                // Wait 1 second before redirecting to the login page
                setTimeout(() => {
                    window.location.href = "/login.html";
                }, 1000);
            } else {
                showNotification(response.message, "error");
                 // Hide the notification after 5 seconds
    setTimeout(() => {
        showNotification.style.display = "none";
    }, 5000);
            }
        })
        .catch(err => {
            showNotification("Something went wrong. Please try again.", "error");
        });
       // Hide the notification after 5 seconds
      setTimeout(() => {
          showNotification.style.display = "none";
      }, 5000);
});

function togglePassword() {
  const passwordField = document.getElementById("new-password");
  const toggleButton = document.querySelector(".toggle-password");

  if (passwordField.type === "password") {
    passwordField.type = "text";
    toggleButton.textContent = "ðŸ«¨";
  }
  else {
    passwordField.type = "password";
    toggleButton.textContent = "ðŸ˜¡";
  }
}
function toggleconfirmPassword() {
  const passwordField = document.getElementById("confirm-password");
  const toggleButton = document.querySelector(".toggle-confirmpassword");

  if (passwordField.type === "password") {
    passwordField.type = "text";
    toggleButton.textContent = "ðŸ«¨";
  }
  else {
    passwordField.type = "password";
    toggleButton.textContent = "ðŸ˜¡";
  }
}



    </script>
</body>
</html>
